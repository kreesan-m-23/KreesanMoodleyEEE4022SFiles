
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  ** This notice applies to any and all portions of this file
  * that are not between comment pairs USER CODE BEGIN and
  * USER CODE END. Other portions of this file, whether 
  * inserted by the user or by software development tools
  * are owned by their respective copyright owners.
  *
  * COPYRIGHT(c) 2018 STMicroelectronics
  *
  * Redistribution and use in source and binary forms, with or without modification,
  * are permitted provided that the following conditions are met:
  *   1. Redistributions of source code must retain the above copyright notice,
  *      this list of conditions and the following disclaimer.
  *   2. Redistributions in binary form must reproduce the above copyright notice,
  *      this list of conditions and the following disclaimer in the documentation
  *      and/or other materials provided with the distribution.
  *   3. Neither the name of STMicroelectronics nor the names of its contributors
  *      may be used to endorse or promote products derived from this software
  *      without specific prior written permission.
  *
  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  *
  ******************************************************************************
  */
/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "stm32f4xx_hal.h"

/* USER CODE BEGIN Includes */

/* USER CODE END Includes */

/* Private variables ---------------------------------------------------------*/
ADC_HandleTypeDef hadc1;

DAC_HandleTypeDef hdac;

TIM_HandleTypeDef htim2;

/* USER CODE BEGIN PV */
/* Private variables ---------------------------------------------------------*/

/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_DAC_Init(void);
static void MX_TIM2_Init(void);
static void MX_ADC1_Init(void);

/* USER CODE BEGIN PFP */
/* Private function prototypes -----------------------------------------------*/

/* USER CODE END PFP */

/* USER CODE BEGIN 0 */
	uint16_t length_of_array = 60000; // Length of Arrays to be Referenced
	uint16_t adc_val[60000]; // Array to Store Incoming Pulses Using the ADC
	uint16_t adc_counter = 0; // Counter to Reference ADC Array
	uint16_t target_one[60000]; // Array to Reference to Simulate False Target One
	uint16_t target_one_counter = 0; // Counter to Refernce False Target One's Array
	uint16_t target_one_delay_counter = 0; // Counter to Create Desired Delay to Insert False Target One
	uint16_t target_one_delay = (int)1*1749; // First Delay of 0.5 meters. Delay in samples for 1 meter delay = ((2*1)/343)[(m)/(m/s)]*(samples/s)
	uint16_t target_two[60000]; // Array to Reference to Simulate False Target Two
	uint16_t target_two_counter = 0; // Counter to Refernce False Target Two's Array
	uint16_t target_two_delay_counter = 0; // Counter to Create Desired Delay to Insert False Target Two
	uint16_t target_two_delay = (int)2*1749; // First Delay of 1.5 meters. Delay in samples for 1 meter delay = ((2*1)/343)[(m)/(m/s)]*(samples/s)
	uint16_t target_one_delay_array[3] = {(int)1*1749, (int)3*1749,(int)4*1749}; // Changing Delays of False Target One
	uint8_t target_one_delay_array_indexer = 0; // Counter to Track Selected Delay of False Target One
	uint16_t target_two_delay_array[3] = {(int)2*1749,(int)4*1749, (int)5*1749}; // Changing Delays of False Target One
	uint8_t target_two_delay_array_indexer = 0; // Counter to Track Selected Delay of False Target One
	uint32_t delay_changer = 0; // Counter to Change Desired Locations of False Targets Periodically
	uint8_t alternator = 0; // Selector to Choose Whether False Target One or Two Gets Sampled Out of the DAC
	uint8_t target_selector = 0; // Selector to Choose Whether Stationary, Approaching or Receding False Targets Get Sampled Out of the DAC
	
	uint16_t adc_val_current = 0; // Current ADC Sample to be Checked in Order to Know When to Send Pulses to Insert Moving False Targets
	
	uint8_t num_pulse_approaching = 1; // Number of Current Pulse in a Line of Pulses to be Transmitted
	uint16_t once_off_delay_approaching = 0; // Once-off Delay to Insert Approaching False Target at Desired Distance
	uint16_t delay_approaching = 0; // Delay to Insert Approaching False Target at Desired Radial Velocity
	uint16_t delay_counter_approaching = 0; // Counter for Delay to Acheive Desired Radial Velocity of False Target
	uint16_t pulse_counter_approaching = 0; // Counter to Keep Track of How Many Pulses were Transmitted
	
	uint8_t num_pulse_receding = 1; // Number of Current Pulse in a Line of Pulses to be Transmitted
	uint16_t once_off_delay_receding = 0; // Once-off Delay to Insert Receding False Target at Desired Distance
	uint16_t delay_receding = 0; // Delay to Insert Receding False Target at Desired Radial Velocity
	uint16_t delay_counter_receding = 0; // Counter for Delay to Acheive Desired Radial Velocity of False Target
	uint16_t pulse_counter_receding = 0; // Counter to Keep Track of How Many Pulses were Transmitted
	
	uint16_t pulse[3000] = {1775, // Pulse Sampled at 100 kHz
2432,
2927,
3137,
3009,
2576,
1944,
1269,
720,
433,
478,
845,
1443,
2123,
2717,
3077,
3113,
2816,
2260,
1583,
954,
529,
414,
638,
1146,
1810,
2466,
2949,
3139,
2988,
2535,
1891,
1218,
684,
423,
500,
895,
1511,
2193,
2770,
3098,
3094,
2759,
2177,
1494,
881,
493,
426,
698,
1240,
1917,
2558,
3002,
3137,
2930,
2431,
1767,
1104,
611,
411,
554,
1006,
1651,
2328,
2865,
3127,
3047,
2645,
2023,
1339,
764,
445,
463,
812,
1406,
2093,
2700,
3071,
3114,
2817,
2256,
1572,
939,
519,
417,
661,
1188,
1864,
2518,
2982,
3139,
2949,
2459,
1795,
1125,
621,
411,
550,
1000,
1649,
2330,
2869,
3128,
3041,
2631,
2001,
1313,
743,
437,
474,
844,
1453,
2144,
2740,
3089,
3100,
2771,
2186,
1495,
876,
487,
430,
719,
1279,
1967,
2605,
3030,
3131,
2883,
2348,
1666,
1011,
554,
411,
621,
1128,
1803,
2470,
2958,
3139,
2968,
2487,
1822,
1145,
630,
412,
547,
1001,
1655,
2340,
2879,
3131,
3031,
2604,
1962,
1271,
711,
427,
494,
895,
1524,
2219,
2798,
3110,
3075,
2699,
2083,
1386,
790,
452,
458,
809,
1412,
2110,
2720,
3083,
3104,
2776,
2186,
1488,
865,
481,
435,
741,
1318,
2015,
2649,
3053,
3122,
2836,
2272,
1576,
933,
511,
421,
688,
1241,
1935,
2586,
3024,
3132,
2882,
2340,
1648,
990,
539,
414,
649,
1181,
1871,
2535,
2998,
3137,
2916,
2392,
1704,
1036,
562,
411,
621,
1137,
1823,
2495,
2977,
3139,
2938,
2428,
1744,
1068,
580,
410,
603,
1108,
1791,
2470,
2963,
3139,
2952,
2450,
1768,
1087,
590,
410,
594,
1094,
1776,
2458,
2957,
3139,
2957,
2457,
1774,
1092,
592,
410,
593,
1094,
1777,
2460,
2959,
3139,
2953,
2450,
1765,
1082,
586,
410,
601,
1108,
1795,
2477,
2969,
3139,
2941,
2428,
1739,
1059,
572,
410,
617,
1137,
1829,
2507,
2987,
3138,
2920,
2392,
1696,
1022,
551,
413,
643,
1181,
1880,
2551,
3010,
3134,
2889,
2340,
1637,
972,
525,
418,
681,
1241,
1947,
2606,
3038,
3126,
2845,
2272,
1563,
911,
496,
430,
731,
1318,
2030,
2672,
3068,
3111,
2787,
2186,
1472,
841,
466,
449,
796,
1412,
2127,
2746,
3097,
3086,
2714,
2083,
1368,
764,
439,
481,
879,
1524,
2239,
2825,
3122,
3047,
2621,
1962,
1250,
684,
418,
528,
981,
1655,
2361,
2906,
3137,
2991,
2508,
1822,
1123,
604,
410,
594,
1105,
1803,
2493,
2983,
3138,
2914,
2373,
1666,
989,
530,
418,
683,
1252,
1967,
2628,
3052,
3119,
2812,
2215,
1495,
853,
468,
449,
799,
1422,
2144,
2763,
3105,
3075,
2681,
2033,
1313,
722,
426,
508,
945,
1615,
2330,
2889,
3135,
2999,
2520,
1830,
1125,
603,
410,
600,
1122,
1827,
2518,
2999,
3135,
2888,
2327,
1610,
939,
504,
428,
732,
1330,
2054,
2700,
3083,
3097,
2737,
2104,
1378,
764,
436,
488,
904,
1567,
2289,
2865,
3132,
3013,
2543,
1855,
1143,
611,
410,
596,
1118,
1827,
2521,
3002,
3134,
2879,
2309,
1586,
917,
493,
434,
758,
1372,
2101,
2737,
3098,
3081,
2690,
2038,
1310,
715,
423,
518,
973,
1658,
2376,
2922,
3139,
2964,
2448,
1739,
1039,
551,
414,
668,
1240,
1966,
2637,
3060,
3113,
2780,
2158,
1426,
794,
444,
478,
886,
1550,
2280,
2863,
3132,
3009,
2529,
1831,
1117,
592,
410,
622,
1168,
1890,
2578,
3034,
3124,
2824,
2219,
1485,
835,
458,
462,
848,
1503,
2237,
2837,
3127,
3025,
2558,
1864,
1143,
606,
410,
611,
1151,
1873,
2567,
3029,
3126,
2828,
2222,
1486,
834,
456,
464,
856,
1516,
2251,
2848,
3130,
3015,
2537,
1835,
1116,
589,
410,
631,
1188,
1917,
2604,
3048,
3117,
2792,
2168,
1428,
789,
441,
485,
909,
1588,
2322,
2894,
3137,
2978,
2464,
1747,
1037,
545,
416,
689,
1282,
2021,
2687,
3083,
3093,
2712,
2054,
1313,
708,
420,
533,
1014,
1721,
2443,
2968,
3138,
2904,
2334,
1598,
914,
486,
441,
793,
1436,
2181,
2804,
3121,
3037,
2577,
1877,
1147,
604,
410,
623,
1180,
1914,
2607,
3052,
3114,
2777,
2139,
1393,
760,
431,
504,
958,
1656,
2390,
2939,
3139,
2931,
2375,
1639,
944,
498,
435,
775,
1415,
2164,
2795,
3120,
3040,
2579,
1876,
1142,
599,
410,
632,
1198,
1939,
2630,
3063,
3107,
2749,
2096,
1347,
726,
423,
528,
1010,
1723,
2452,
2977,
3137,
2884,
2296,
1549,
870,
466,
459,
850,
1523,
2271,
2869,
3135,
2987,
2471,
1742,
1024,
534,
421,
720,
1341,
2093,
2749,
3108,
3060,
2621,
1923,
1180,
618,
410,
618,
1179,
1923,
2621,
3061,
3107,
2746,
2087,
1333,
714,
419,
540,
1039,
1764,
2492,
3000,
3132,
2848,
2234,
1479,
815,
445,
484,
920,
1618,
2365,
2930,
3139,
2929,
2362,
1615,
917,
483,
447,
820,
1489,
2245,
2856,
3134,
2991,
2473,
1739,
1016,
527,
424,
739,
1375,
2134,
2782,
3118,
3038,
2566,
1849,
1108,
574,
413,
674,
1276,
2034,
2711,
3097,
3072,
2644,
1945,
1193,
622,
410,
622,
1194,
1946,
2645,
3073,
3096,
2707,
2027,
1268,
667,
412,
582,
1125,
1871,
2587,
3049,
3112,
2757,
2094,
1331,
707,
417,
553,
1071,
1810,
2538,
3027,
3122,
2795,
2147,
1382,
740,
423,
531,
1030,
1763,
2500,
3008,
3129,
2823,
2186,
1420,
766,
429,
517,
1001,
1729,
2472,
2995,
3132,
2841,
2212,
1446,
783,
433,
508,
984,
1710,
2456,
2987,
3134,
2850,
2225,
1457,
790,
435,
505,
978,
1704,
2452,
2985,
3134,
2850,
2225,
1456,
788,
434,
507,
983,
1712,
2460,
2990,
3133,
2842,
2211,
1441,
777,
431,
514,
1000,
1733,
2480,
3001,
3130,
2825,
2185,
1412,
756,
426,
528,
1029,
1769,
2511,
3017,
3125,
2799,
2144,
1371,
727,
420,
547,
1070,
1818,
2553,
3038,
3116,
2762,
2090,
1317,
691,
414,
575,
1123,
1882,
2605,
3061,
3102,
2714,
2022,
1251,
648,
410,
613,
1191,
1958,
2666,
3086,
3081,
2652,
1940,
1174,
602,
411,
661,
1273,
2048,
2734,
3109,
3050,
2577,
1843,
1087,
554,
418,
724,
1371,
2150,
2806,
3127,
3007,
2485,
1732,
992,
508,
436,
801,
1484,
2262,
2881,
3138,
2950,
2377,
1607,
892,
466,
467,
897,
1614,
2384,
2954,
3138,
2875,
2251,
1471,
790,
433,
515,
1012,
1759,
2511,
3021,
3122,
2779,
2106,
1324,
690,
413,
584,
1147,
1917,
2640,
3078,
3086,
2661,
1944,
1171,
597,
411,
676,
1304,
2087,
2767,
3119,
3026,
2519,
1766,
1015,
516,
433,
795,
1482,
2265,
2886,
3139,
2938,
2352,
1573,
862,
453,
484,
943,
1679,
2447,
2991,
3131,
2819,
2160,
1372,
718,
416,
567,
1120,
1892,
2624,
3073,
3089,
2666,
1945,
1168,
592,
412,
687,
1326,
2115,
2790,
3125,
3008,
2478,
1713,
968,
493,
447,
847,
1558,
2341,
2935,
3139,
2885,
2258,
1468,
782,
429,
528,
1047,
1810,
2562,
3048,
3106,
2716,
2008,
1221,
621,
410,
659,
1284,
2075,
2764,
3120,
3021,
2501,
1736,
983,
498,
445,
841,
1553,
2341,
2936,
3139,
2879,
2245,
1451,
767,
425,
540,
1074,
1846,
2594,
3063,
3095,
2678,
1954,
1169,
590,
413,
700,
1352,
2148,
2817,
3131,
2983,
2423,
1642,
905,
466,
472,
923,
1665,
2444,
2995,
3128,
2799,
2120,
1323,
680,
411,
609,
1206,
1998,
2713,
3107,
3044,
2547,
1784,
1018,
511,
438,
824,
1536,
2330,
2933,
3139,
2875,
2233,
1434,
751,
421,
556,
1111,
1894,
2637,
3082,
3077,
2623,
1876,
1094,
547,
424,
766,
1457,
2258,
2892,
3139,
2915,
2297,
1498,
794,
430,
531,
1063,
1841,
2596,
3067,
3090,
2657,
1917,
1129,
564,
419,
745,
1428,
2232,
2877,
3139,
2926,
2313,
1513,
803,
432,
528,
1058,
1838,
2596,
3068,
3089,
2652,
1909,
1119,
557,
421,
757,
1449,
2254,
2892,
3139,
2910,
2283,
1478,
777,
425,
545,
1096,
1885,
2635,
3083,
3073,
2608,
1850,
1065,
530,
431,
804,
1518,
2322,
2934,
3138,
2863,
2205,
1395,
719,
414,
589,
1180,
1982,
2710,
3109,
3037,
2520,
1740,
972,
487,
457,
892,
1638,
2433,
2996,
3126,
2779,
2076,
1267,
637,
410,
666,
1315,
2126,
2814,
3133,
2970,
2383,
1581,
847,
442,
510,
1028,
1810,
2580,
3064,
3089,
2647,
1894,
1099,
544,
427,
790,
1503,
2314,
2932,
3138,
2858,
2191,
1376,
702,
412,
608,
1221,
2031,
2750,
3120,
3010,
2457,
1660,
904,
460,
486,
973,
1748,
2532,
3045,
3102,
2684,
1939,
1135,
560,
422,
769,
1477,
2292,
2922,
3139,
2865,
2200,
1381,
704,
412,
611,
1229,
2043,
2761,
3123,
3000,
2434,
1630,
879,
450,
500,
1009,
1796,
2574,
3064,
3088,
2637,
1874,
1075,
529,
434,
824,
1559,
2371,
2968,
3132,
2804,
2103,
1282,
640,
410,
675,
1339,
2162,
2844,
3137,
2935,
2312,
1492,
776,
422,
561,
1142,
1953,
2699,
3108,
3032,
2497,
1699,
928,
466,
481,
969,
1751,
2541,
3052,
3096,
2657,
1895,
1089,
534,
433,
822,
1561,
2377,
2973,
3130,
2790,
2078,
1254,
621,
411,
702,
1386,
2213,
2879,
3139,
2898,
2244,
1418,
722,
413,
605,
1228,
2052,
2773,
3127,
2983,
2393,
1575,
831,
434,
532,
1088,
1898,
2662,
3099,
3046,
2524,
1724,
944,
470,
479,
967,
1754,
2549,
3057,
3090,
2636,
1863,
1056,
516,
443,
863,
1622,
2437,
3007,
3119,
2732,
1989,
1166,
570,
421,
776,
1502,
2330,
2951,
3134,
2811,
2102,
1271,
627,
411,
703,
1395,
2229,
2893,
3139,
2876,
2202,
1368,
685,
410,
645,
1302,
2136,
2835,
3137,
2929,
2289,
1456,
742,
415,
598,
1221,
2053,
2780,
3130,
2971,
2363,
1534,
795,
424,
561,
1153,
1980,
2729,
3119,
3003,
2425,
1602,
844,
436,
532,
1097,
1917,
2684,
3107,
3028,
2476,
1659,
885,
448,
511,
1052,
1866,
2646,
3096,
3046,
2516,
1704,
920,
458,
496,
1017,
1826,
2615,
3086,
3059,
2545,
1739,
946,
467,
485,
993,
1797,
2593,
3078,
3067,
2565,
1762,
963,
473,
479,
978,
1780,
2581,
3074,
3072,
2575,
1773,
971,
476,
476,
972,
1775,
2577,
3073,
3073,
2576,
1773,
971,
475,
477,
976,
1780,
2582,
3075,
3070,
2568,
1762,
960,
471,
482,
989,
1797,
2597,
3081,
3063,
2550,
1739,
941,
464,
491,
1012,
1826,
2621,
3090,
3052,
2522,
1704,
913,
454,
504,
1044,
1866,
2653,
3100,
3036,
2485,
1659,
878,
443,
523,
1087,
1917,
2692,
3112,
3014,
2436,
1602,
834,
431,
548,
1141,
1980,
2739,
3124,
2985,
2377,
1534,
785,
420,
582,
1207,
2053,
2790,
3133,
2947,
2305,
1456,
731,
412,
625,
1285,
2136,
2846,
3139,
2899,
2220,
1368,
674,
410,
678,
1376,
2229,
2904,
3138,
2839,
2123,
1271,
615,
414,
745,
1480,
2330,
2962,
3129,
2765,
2013,
1166,
559,
428,
826,
1597,
2437,
3017,
3109,
2676,
1889,
1056,
506,
455,
923,
1727,
2549,
3066,
3075,
2571,
1753,
944,
462,
498,
1038,
1868,
2662,
3106,
3023,
2448,
1606,
831,
429,
559,
1170,
2020,
2773,
3131,
2952,
2306,
1450,
722,
411,
641,
1320,
2180,
2879,
3139,
2858,
2147,
1287,
621,
414,
747,
1489,
2344,
2973,
3126,
2740,
1970,
1122,
534,
440,
878,
1673,
2509,
3052,
3085,
2596,
1779,
959,
466,
495,
1035,
1871,
2668,
3108,
3015,
2426,
1576,
805,
422,
581,
1218,
2078,
2816,
3137,
2912,
2231,
1366,
666,
410,
702,
1424,
2288,
2945,
3132,
2773,
2013,
1157,
549,
434,
858,
1652,
2494,
3047,
3088,
2599,
1778,
955,
463,
500,
1051,
1894,
2689,
3115,
3000,
2390,
1531,
771,
416,
611,
1276,
2143,
2861,
3139,
2865,
2149,
1281,
613,
416,
769,
1530,
2390,
3001,
3114,
2684,
1884,
1040,
494,
468,
973,
1804,
2623,
3097,
3033,
2457,
1603,
819,
424,
579,
1221,
2088,
2828,
3138,
2893,
2191,
1319,
633,
413,
749,
1503,
2369,
2992,
3117,
2694,
1894,
1046,
495,
468,
976,
1810,
2630,
3100,
3026,
2440,
1581,
801,
420,
595,
1254,
2126,
2855,
3139,
2864,
2140,
1267,
602,
419,
793,
1571,
2433,
3024,
3101,
2631,
1809,
972,
466,
499,
1058,
1912,
2710,
3122,
2978,
2337,
1464,
719,
410,
665,
1378,
2255,
2934,
3133,
2770,
1995,
1129,
530,
446,
913,
1736,
2576,
3083,
3048,
2485,
1627,
830,
425,
580,
1231,
2108,
2846,
3139,
2865,
2138,
1259,
595,
421,
811,
1601,
2464,
3040,
3089,
2590,
1751,
922,
448,
528,
1127,
1997,
2774,
3134,
2926,
2238,
1355,
648,
412,
745,
1509,
2384,
3004,
3110,
2657,
1834,
987,
469,
498,
1063,
1925,
2725,
3126,
2960,
2297,
1414,
683,
410,
710,
1457,
2338,
2982,
3119,
2690,
1876,
1019,
480,
486,
1034,
1894,
2704,
3122,
2972,
2317,
1434,
694,
410,
701,
1446,
2330,
2979,
3119,
2692,
1876,
1018,
479,
488,
1041,
1905,
2713,
3124,
2964,
2300,
1413,
680,
410,
719,
1475,
2359,
2995,
3113,
2663,
1836,
983,
466,
505,
1084,
1956,
2751,
3131,
2934,
2244,
1353,
642,
413,
764,
1545,
2424,
3027,
3095,
2601,
1754,
916,
444,
540,
1163,
2048,
2815,
3139,
2879,
2147,
1256,
586,
425,
841,
1657,
2523,
3068,
3060,
2501,
1631,
822,
421,
601,
1284,
2178,
2898,
3137,
2790,
2008,
1125,
521,
456,
957,
1810,
2648,
3110,
2998,
2359,
1468,
710,
410,
697,
1449,
2341,
2989,
3113,
2660,
1825,
968,
459,
518,
1119,
2004,
2790,
3137,
2895,
2169,
1272,
592,
424,
840,
1661,
2531,
3073,
3053,
2479,
1600,
796,
416,
626,
1333,
2233,
2933,
3131,
2739,
1929,
1052,
488,
484,
1040,
1916,
2731,
3129,
2938,
2241,
1340,
629,
416,
795,
1601,
2483,
3056,
3070,
2519,
1643,
825,
421,
608,
1304,
2206,
2920,
3133,
2752,
1944,
1062,
491,
482,
1038,
1917,
2734,
3130,
2933,
2228,
1324,
618,
419,
814,
1631,
2511,
3068,
3057,
2483,
1598,
790,
415,
637,
1359,
2264,
2954,
3125,
2701,
1870,
997,
466,
511,
1113,
2007,
2798,
3138,
2877,
2129,
1225,
563,
436,
900,
1750,
2611,
3102,
3007,
2367,
1465,
699,
410,
724,
1503,
2402,
3024,
3092,
2577,
1706,
865,
428,
587,
1273,
2182,
2910,
3134,
2755,
1940,
1052,
485,
491,
1067,
1958,
2768,
3136,
2898,
2160,
1251,
574,
432,
888,
1739,
2605,
3102,
3006,
2362,
1455,
691,
410,
738,
1529,
2430,
3038,
3081,
2541,
1658,
827,
420,
618,
1334,
2248,
2949,
3125,
2696,
1854,
977,
457,
528,
1157,
2064,
2841,
3139,
2825,
2039,
1135,
517,
464,
1000,
1884,
2719,
3129,
2930,
2211,
1296,
596,
426,
864,
1712,
2588,
3098,
3011,
2367,
1456,
688,
410,
748,
1549,
2452,
3049,
3070,
2506,
1612,
790,
414,
653,
1399,
2315,
2987,
3110,
2628,
1760,
898,
433,
576,
1262,
2180,
2915,
3132,
2734,
1900,
1009,
466,
517,
1139,
2050,
2836,
3139,
2823,
2029,
1120,
508,
473,
1030,
1926,
2753,
3135,
2897,
2147,
1228,
557,
442,
935,
1810,
2670,
3121,
2957,
2253,
1331,
611,
423,
852,
1703,
2587,
3099,
3005,
2348,
1428,
667,
412,
782,
1606,
2508,
3073,
3043,
2432,
1518,
723,
410,
723,
1519,
2433,
3044,
3072,
2504,
1601,
777,
412,
674,
1442,
2363,
3014,
3094,
2566,
1674,
828,
418,
633,
1375,
2300,
2984,
3109,
2619,
1739,
875,
426,
601,
1317,
2245,
2956,
3120,
2663,
1794,
917,
436,
575,
1269,
2197,
2930,
3127,
2698,
1840,
952,
445,
555,
1230,
2158,
2908,
3132,
2725,
1877,
981,
454,
540,
1200,
2128,
2891,
3135,
2746,
1905,
1003,
460,
530,
1179,
2106,
2878,
3136,
2759,
1923,
1017,
465,
524,
1166,
2093,
2871,
3137,
2766,
1932,
1024,
467,
521,
1162,
2089,
2869,
3137,
2767,
1932,
1023,
466,
522,
1166,
2094,
2873,
3137,
2761,
1922,
1014,
463,
528,
1178,
2109,
2882,
3136,
2749,
1904,
998,
457,
537,
1198,
2132,
2897,
3133,
2730,
1876,
974,
450,
550,
1228,
2164,
2916,
3130,
2704,
1839,
944,
441,
568,
1266,
2204,
2939,
3123,
2670,
1792,
906,
431,
592,
1313,
2253,
2966,
3114,
2628,
1737,
863,
422,
623,
1370,
2309,
2995,
3101,
2577,
1672,
815,
415,
661,
1436,
2373,
3025,
3082,
2516,
1598,
763,
410,
707,
1513,
2443,
3055,
3056,
2446,
1515,
708,
410,
763,
1599,
2519,
3083,
3022,
2365,
1425,
652,
416,
830,
1696,
2599,
3108,
2978,
2272,
1327,
597,
431,
909,
1802,
2682,
3127,
2923,
2168,
1224,
544,
455,
1000,
1917,
2766,
3138,
2854,
2052,
1116,
496,
492,
1105,
2040,
2848,
3138,
2772,
1925,
1005,
456,
543,
1224,
2170,
2926,
3126,
2673,
1787,
894,
427,
611,
1357,
2305,
2997,
3097,
2558,
1640,
786,
411,
696,
1503,
2442,
3057,
3051,
2426,
1485,
684,
412,
801,
1662,
2578,
3104,
2984,
2277,
1326,
592,
434,
927,
1832,
2710,
3132,
2894,
2111,
1164,
514,
478,
1073,
2010,
2832,
3139,
2780,
1931,
1005,
455,
548,
1240,
2193,
2942,
3120,
2641,
1739,
854,
419,
647,
1426,
2376,
3032,
3072,
2477,
1538,
715,
410,
774,
1629,
2555,
3098,
2993,
2290,
1334,
594,
434,
932,
1844,
2722,
3134,
2879,
2081,
1132,
499,
493,
1118,
2066,
2870,
3135,
2730,
1855,
939,
435,
591,
1331,
2289,
2993,
3097,
2548,
1617,
764,
410,
729,
1565,
2505,
3083,
3015,
2333,
1375,
615,
428,
907,
1816,
2704,
3132,
2888,
2092,
1139,
500,
494,
1122,
2074,
2878,
3134,
2716,
1830,
917,
429,
610,
1369,
2330,
3014,
3083,
2501,
1557,
722,
410,
777,
1641,
2571,
3105,
2976,
2248,
1284,
565,
449,
993,
1928,
2786,
3139,
2812,
1966,
1025,
458,
549,
1252,
2217,
2960,
3111,
2593,
1666,
793,
411,
712,
1544,
2493,
3081,
3015,
2327,
1362,
604,
432,
934,
1857,
2739,
3137,
2851,
2024,
1072,
473,
528,
1209,
2175,
2939,
3118,
2621,
1698,
813,
412,
697,
1524,
2478,
3077,
3020,
2335,
1368,
605,
433,
937,
1864,
2746,
3138,
2841,
2006,
1054,
466,
539,
1237,
2206,
2958,
3111,
2588,
1653,
780,
410,
731,
1581,
2528,
3094,
2991,
2272,
1300,
568,
449,
1002,
1947,
2805,
3139,
2781,
1911,
972,
441,
587,
1337,
2310,
3010,
3082,
2489,
1532,
698,
413,
820,
1714,
2639,
3123,
2920,
2133,
1163,
505,
494,
1137,
2105,
2905,
3127,
2659,
1739,
837,
414,
687,
1515,
2477,
3079,
3014,
2315,
1339,
586,
442,
980,
1925,
2794,
3139,
2786,
1914,
970,
439,
593,
1354,
2330,
3022,
3073,
2457,
1491,
670,
417,
862,
1776,
2689,
3132,
2877,
2054,
1087,
474,
531,
1228,
2207,
2963,
3107,
2563,
1613,
746,
410,
777,
1659,
2601,
3116,
2938,
2159,
1181,
510,
492,
1137,
2112,
2912,
3124,
2638,
1704,
807,
411,
721,
1576,
2535,
3099,
2977,
2232,
1249,
539,
470,
1078,
2047,
2875,
3132,
2684,
1763,
848,
415,
688,
1526,
2494,
3087,
2998,
2272,
1287,
556,
459,
1048,
2015,
2857,
3135,
2704,
1788,
865,
417,
676,
1509,
2480,
3083,
3003,
2281,
1294,
559,
458,
1046,
2015,
2858,
3134,
2699,
1780,
858,
416,
685,
1524,
2495,
3089,
2993,
2259,
1271,
546,
466,
1072,
2047,
2879,
3131,
2671,
1740,
827,
412,
713,
1572,
2538,
3102,
2968,
2206,
1217,
521,
485,
1128,
2112,
2917,
3121,
2615,
1666,
774,
410,
765,
1653,
2605,
3119,
2923,
2120,
1135,
487,
520,
1215,
2207,
2969,
3100,
2530,
1560,
703,
413,
844,
1768,
2695,
3134,
2854,
2001,
1028,
451,
576,
1336,
2330,
3028,
3062,
2412,
1423,
621,
432,
956,
1915,
2800,
3139,
2753,
1846,
901,
421,
661,
1494,
2476,
3085,
2996,
2256,
1259,
537,
475,
1106,
2093,
2911,
3122,
2614,
1658,
764,
410,
784,
1688,
2638,
3127,
2892,
2060,
1075,
464,
554,
1298,
2296,
3016,
3070,
2431,
1440,
628,
431,
954,
1917,
2804,
3139,
2741,
1825,
881,
417,
682,
1534,
2515,
3098,
2970,
2199,
1200,
510,
500,
1176,
2174,
2957,
3104,
2535,
1556,
695,
415,
869,
1810,
2733,
3138,
2808,
1921,
954,
430,
632,
1451,
2445,
3077,
3005,
2268,
1264,
536,
478,
1121,
2118,
2929,
3115,
2576,
1603,
722,
412,
840,
};
	
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  *
  * @retval None
  */
int main(void)
{
  /* USER CODE BEGIN 1 */

  /* USER CODE END 1 */

  /* MCU Configuration----------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_DAC_Init();
  MX_TIM2_Init();
  MX_ADC1_Init();
  /* USER CODE BEGIN 2 */
	HAL_TIM_Base_Start(&htim2); // Start Timer 2
	HAL_ADC_Start_IT(&hadc1); // Start ADC Interrupt Generated by Timer Interrupt
	HAL_DAC_Start(&hdac, DAC_CHANNEL_2); // Start DAC
  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1)
  {

  /* USER CODE END WHILE */

  /* USER CODE BEGIN 3 */

  }
  /* USER CODE END 3 */

}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{

  RCC_OscInitTypeDef RCC_OscInitStruct;
  RCC_ClkInitTypeDef RCC_ClkInitStruct;

    /**Configure the main internal regulator output voltage 
    */
  __HAL_RCC_PWR_CLK_ENABLE();

  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);

    /**Initializes the CPU, AHB and APB busses clocks 
    */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
  RCC_OscInitStruct.HSEState = RCC_HSE_ON;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
  RCC_OscInitStruct.PLL.PLLM = 8;
  RCC_OscInitStruct.PLL.PLLN = 336;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 7;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

    /**Initializes the CPU, AHB and APB busses clocks 
    */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV8;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV8;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

    /**Configure the Systick interrupt time 
    */
  HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);

    /**Configure the Systick 
    */
  HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);

  /* SysTick_IRQn interrupt configuration */
  HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
}

/* ADC1 init function */
static void MX_ADC1_Init(void)
{

  ADC_ChannelConfTypeDef sConfig;

    /**Configure the global features of the ADC (Clock, Resolution, Data Alignment and number of conversion) 
    */
  hadc1.Instance = ADC1;
  hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV2;
  hadc1.Init.Resolution = ADC_RESOLUTION_12B;
  hadc1.Init.ScanConvMode = DISABLE;
  hadc1.Init.ContinuousConvMode = DISABLE;
  hadc1.Init.DiscontinuousConvMode = DISABLE;
  hadc1.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_RISING;
  hadc1.Init.ExternalTrigConv = ADC_EXTERNALTRIGCONV_T2_TRGO;
  hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
  hadc1.Init.NbrOfConversion = 1;
  hadc1.Init.DMAContinuousRequests = DISABLE;
  hadc1.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
  if (HAL_ADC_Init(&hadc1) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

    /**Configure for the selected ADC regular channel its corresponding rank in the sequencer and its sample time. 
    */
  sConfig.Channel = ADC_CHANNEL_1;
  sConfig.Rank = 1;
  sConfig.SamplingTime = ADC_SAMPLETIME_3CYCLES;
  if (HAL_ADC_ConfigChannel(&hadc1, &sConfig) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

}

/* DAC init function */
static void MX_DAC_Init(void)
{

  DAC_ChannelConfTypeDef sConfig;

    /**DAC Initialization 
    */
  hdac.Instance = DAC;
  if (HAL_DAC_Init(&hdac) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

    /**DAC channel OUT2 config 
    */
  sConfig.DAC_Trigger = DAC_TRIGGER_NONE;
  sConfig.DAC_OutputBuffer = DAC_OUTPUTBUFFER_ENABLE;
  if (HAL_DAC_ConfigChannel(&hdac, &sConfig, DAC_CHANNEL_2) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

}

/* TIM2 init function */
static void MX_TIM2_Init(void)
{

  TIM_ClockConfigTypeDef sClockSourceConfig;
  TIM_MasterConfigTypeDef sMasterConfig;

  htim2.Instance = TIM2;
  htim2.Init.Prescaler = 13;
  htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
  htim2.Init.Period = 9;
  htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
  if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

  sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
  if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

  sMasterConfig.MasterOutputTrigger = TIM_TRGO_UPDATE;
  sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
  if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
  {
    _Error_Handler(__FILE__, __LINE__);
  }

}

/** Configure pins as 
        * Analog 
        * Input 
        * Output
        * EVENT_OUT
        * EXTI
*/
static void MX_GPIO_Init(void)
{

  GPIO_InitTypeDef GPIO_InitStruct;

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOH_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOD_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOD, GPIO_PIN_12|GPIO_PIN_13, GPIO_PIN_RESET);

  /*Configure GPIO pins : PD12 PD13 */
  GPIO_InitStruct.Pin = GPIO_PIN_12|GPIO_PIN_13;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

}

/* USER CODE BEGIN 4 */
void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)
{
  /* Prevent unused argument(s) compilation warning */
  UNUSED(hadc);
  /* NOTE : This function Should not be modified, when the callback is needed,
            the HAL_ADC_ConvCpltCallback could be implemented in the user file
   */
	
	adc_val[adc_counter] = HAL_ADC_GetValue(&hadc1);
	adc_counter ++;
	if (adc_counter == length_of_array){adc_counter = 0;}
	
	if (target_selector == 0){ // Insert Stationary False Targets in Radar System
		target_selector = 1;
		
		if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter --;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter --;
		}
		
		// Insert One False Target One
		else if ((target_one_delay_counter == target_one_delay) && (target_two_delay_counter != target_two_delay)){
			HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, adc_val[target_one_counter]);
			target_one_counter ++;
			if (target_one_counter == length_of_array){target_one_counter = 0;}
			if (target_two_delay_counter > target_two_delay){target_two_delay_counter --;}
			if (target_two_delay_counter < target_two_delay){target_two_delay_counter ++;}
		}
		
		else if ((target_one_delay_counter != target_one_delay) && (target_two_delay_counter == target_two_delay)){
			HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, adc_val[target_two_counter]);
			target_two_counter ++;
			if (target_two_counter == length_of_array){target_two_counter = 0;}
			if (target_one_delay_counter > target_one_delay){target_one_delay_counter --;}
			if (target_one_delay_counter < target_one_delay){target_one_delay_counter ++;}
		}
		
		// Insert Two False Targets
		else if ((target_one_delay_counter == target_one_delay) && (target_two_delay_counter == target_two_delay)){
			if (alternator == 0){ // Select First Stationary False Target
				HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, adc_val[target_one_counter]);
				target_one_counter ++;
				if (target_one_counter == length_of_array){target_one_counter = 0;}
				target_two_counter ++;
				if (target_two_counter == length_of_array){target_two_counter = 0;}
				alternator = 1;
			}
			
			else{ // Select Second Stationary False Target
				HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, adc_val[target_two_counter]);
				target_one_counter ++;
				if (target_one_counter == length_of_array){target_one_counter = 0;}
				target_two_counter ++;
				if (target_two_counter == length_of_array){target_two_counter = 0;}
				alternator = 0;
			}
		}
	}
	
	else if (target_selector == 1){ // Insert Approaching False Target in Radar System
		target_selector = 2;
		
		target_one_counter ++;
		if (target_one_counter == length_of_array){target_one_counter = 0;}
		target_two_counter ++;
		if (target_two_counter == length_of_array){target_two_counter = 0;}
		
		if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter --;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter --;
		}
		
		if (adc_val_current > 3000){
		HAL_GPIO_WritePin(GPIOD, GPIO_PIN_12, 1);
		
		delay_approaching = (int)(100000*(0.03-(0.000011 * 1))); // (*insert speed in cm/s here* * 1). 2.5 cm/s = 0.000001 5 cm/s = 0.000011 10 cm/s = 0.000024. Found Empirically.
		if (once_off_delay_approaching == (int)((3.3+7) * 583.09)){ // (3.3 + *insert desired distance here*). Found Empirically.
			if (delay_counter_approaching == delay_approaching){
				HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, pulse[pulse_counter_approaching]);
				pulse_counter_approaching ++;
				if (pulse_counter_approaching == 3000){
					pulse_counter_approaching = 0;
					delay_counter_approaching = 0;
					num_pulse_approaching ++;
					if (num_pulse_approaching == 36){
						num_pulse_approaching = 1;
						adc_val_current = 0;
						once_off_delay_approaching = 0;
					}
				}
			}
			
			else {delay_counter_approaching ++;}
		}
		else {once_off_delay_approaching ++;}
	}
	
		else {
			adc_val_current = HAL_ADC_GetValue(&hadc1);
			HAL_GPIO_WritePin(GPIOD, GPIO_PIN_12, 0);
		}
	}
	
	else if (target_selector == 2){ // Insert Receding False Target in Radar System
		target_selector = 0;
		
		target_one_counter ++;
		if (target_one_counter == length_of_array){target_one_counter = 0;}
		target_two_counter ++;
		if (target_two_counter == length_of_array){target_two_counter = 0;}
		
		if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter < target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter ++;
			target_two_delay_counter --;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter < target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter ++;
		}
		
		else if ((target_one_delay_counter > target_one_delay) && (target_two_delay_counter > target_two_delay)){
			target_one_delay_counter --;
			target_two_delay_counter --;
		}
		
		if (adc_val_current > 3000){
		HAL_GPIO_WritePin(GPIOD, GPIO_PIN_12, 1);
		
		delay_receding = (int)(100000*(0.03+(0.000020* 1))); // (*insert speed in cm/s here* * 1). -2.5 cm/s = 0.000010 -5 cm/s = 0.000020 -10 cm/s = 0.000030. Found Empirically.
		if (once_off_delay_receding == (int)((3.3+7)*583.09)){ // (3.3 + *insert desired distance here*). Found Empirically.
			if (delay_counter_receding == delay_receding){
				HAL_DAC_SetValue(&hdac, DAC_CHANNEL_2, DAC_ALIGN_12B_R, pulse[pulse_counter_receding]);
				pulse_counter_receding ++;
				if (pulse_counter_receding == 3000){
					pulse_counter_receding = 0;
					delay_counter_receding = 0;
					num_pulse_receding ++;
					if (num_pulse_receding == 36){
						num_pulse_receding = 1;
						adc_val_current = 0;
						once_off_delay_receding = 0;
					}
				}
			}
			
			else {delay_counter_receding ++;}
		}
		else {once_off_delay_receding ++;}
	}
	
		else {
			adc_val_current = HAL_ADC_GetValue(&hadc1);
			HAL_GPIO_WritePin(GPIOD, GPIO_PIN_12, 0);
		}
	}
	// Change Location of False Target Every 10 Seconds
	if (delay_changer == (3000000 - 1)){
		HAL_GPIO_TogglePin(GPIOD, GPIO_PIN_13);
		
		target_one_delay = target_one_delay_array[target_one_delay_array_indexer];
		target_one_delay_array_indexer ++;
		if (target_one_delay_array_indexer == 3){target_one_delay_array_indexer = 0;}
		
		target_two_delay = target_two_delay_array[target_two_delay_array_indexer];
		target_two_delay_array_indexer ++;
		if (target_two_delay_array_indexer == 3){target_two_delay_array_indexer = 0;}
		
		delay_changer = 0;
	}
	else {delay_changer ++;}
	
}
/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @param  file: The file name as string.
  * @param  line: The line in file as a number.
  * @retval None
  */
void _Error_Handler(char *file, int line)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */
  while(1)
  {
  }
  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t* file, uint32_t line)
{ 
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     tex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */

/**
  * @}
  */

/**
  * @}
  */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
